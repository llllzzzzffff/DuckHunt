{"version":3,"sources":["duckManager.js"],"names":["mvs","require","GLB","duck","cc","Class","extends","Component","properties","accCd","accPercent","ducks","Prefab","spawnPos","Vec2","onLoad","Game","DuckManger","curAccCd","flySpeedDelat","duckId","setInterval","spawnDuck","bind","GameManager","gameState","GameState","Play","randomType","dataFunc","randomNum","length","duckTemp","instantiate","parent","node","duckComp","getComponent","initData","update","dt","onDestroy","clearInterval"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;AACA,IAAIC,MAAMD,QAAQ,KAAR,CAAV;AACA,IAAME,OAAOF,QAAQ,MAAR,CAAb;;AAEAG,GAAGC,KAAH,CAAS;;AAELC,aAASF,GAAGG,SAFP;AAGLC,gBAAY;AACRC,eAAO,EADC;AAERC,oBAAY,GAFJ;AAGRC,eAAO,CAACP,GAAGQ,MAAJ,CAHC;AAIRC,kBAAU,CAACT,GAAGU,IAAJ;AAJF,KAHP;AASL;;AAEAC,UAXK,oBAWI;AACLC,aAAKC,UAAL,GAAkB,IAAlB;AACA,aAAKC,QAAL,GAAgB,KAAKT,KAArB;AACA,aAAKU,aAAL,GAAqB,CAArB;AACA,aAAKC,MAAL,GAAcC,YAAY,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAZ,EAAuC,IAAvC,CAAd;AACH,KAhBI;;;AAkBLD,eAAW,qBAAW;AAClB,YAAIN,KAAKQ,WAAL,CAAiBC,SAAjB,KAA+BC,UAAUC,IAA7C,EAAmD;AAC/C,gBAAIC,aAAaC,SAASC,SAAT,CAAmB,CAAnB,EAAsB,KAAKnB,KAAL,CAAWoB,MAAX,GAAoB,CAA1C,CAAjB;AACA,gBAAIC,WAAW5B,GAAG6B,WAAH,CAAe,KAAKtB,KAAL,CAAWiB,UAAX,CAAf,CAAf;AACAI,qBAASE,MAAT,GAAkB,KAAKC,IAAvB;AACA,gBAAIC,WAAWJ,SAASK,YAAT,CAAsBlC,IAAtB,CAAf;AACA,gBAAIiC,QAAJ,EAAc;AACVA,yBAASE,QAAT,CAAkB,KAAKzB,QAAL,CAAce,UAAd,CAAlB;AACH;AACJ;AACJ,KA5BI;;AA8BLW,UA9BK,kBA8BEC,EA9BF,EA8BM;AACP,aAAKtB,QAAL,IAAiBsB,EAAjB;AACA,YAAI,KAAKtB,QAAL,GAAgB,CAApB,EAAuB;AACnB,iBAAKA,QAAL,GAAgB,KAAKT,KAArB;AACA,iBAAKU,aAAL,IAAsB,KAAKT,UAA3B;AACH;AACJ,KApCI;AAsCL+B,aAtCK,uBAsCO;AACRC,sBAAc,KAAKtB,MAAnB;AACH;AAxCI,CAAT","file":"duckManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\common\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar mvs = require(\"Matchvs\");\r\nvar GLB = require(\"Glb\");\r\nconst duck = require('duck');\r\n\r\ncc.Class({\r\n\r\n    extends: cc.Component,\r\n    properties: {\r\n        accCd: 10,\r\n        accPercent: 1.1,\r\n        ducks: [cc.Prefab],\r\n        spawnPos: [cc.Vec2]\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        Game.DuckManger = this;\r\n        this.curAccCd = this.accCd;\r\n        this.flySpeedDelat = 1;\r\n        this.duckId = setInterval(this.spawnDuck.bind(this), 2000);\r\n    },\r\n\r\n    spawnDuck: function() {\r\n        if (Game.GameManager.gameState === GameState.Play) {\r\n            var randomType = dataFunc.randomNum(0, this.ducks.length - 1);\r\n            var duckTemp = cc.instantiate(this.ducks[randomType]);\r\n            duckTemp.parent = this.node;\r\n            var duckComp = duckTemp.getComponent(duck);\r\n            if (duckComp) {\r\n                duckComp.initData(this.spawnPos[randomType]);\r\n            }\r\n        }\r\n    },\r\n\r\n    update(dt) {\r\n        this.curAccCd -= dt;\r\n        if (this.curAccCd < 0) {\r\n            this.curAccCd = this.accCd;\r\n            this.flySpeedDelat *= this.accPercent;\r\n        }\r\n    },\r\n\r\n    onDestroy() {\r\n        clearInterval(this.duckId);\r\n    }\r\n});\r\n"]}