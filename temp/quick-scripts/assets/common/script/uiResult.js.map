{"version":3,"sources":["uiResult.js"],"names":["uiPanel","require","mvs","GLB","cc","Class","extends","properties","winAudio","default","url","AudioClip","loseAudio","onLoad","_super","player1","nodeDict","getComponent","node","active","player2","player3","on","quit","setData","data","length","userInfo","id","audioEngine","play","Game","GameManager","loginServer","engine","leaveRoom","gamePanel","uiFunc","findUI","closeUI","destroy","name","lobbyShow"],"mappings":";;;;;;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,MAAMD,QAAQ,SAAR,CAAV;AACA,IAAIE,MAAMF,QAAQ,KAAR,CAAV;AACAG,GAAGC,KAAH,CAAS;AACLC,aAASN,OADJ;;AAGLO,gBAAY;AACRC,kBAAU;AACNC,qBAAS,IADH;AAENC,iBAAKN,GAAGO;AAFF,SADF;;AAMRC,mBAAW;AACPH,qBAAS,IADF;AAEPC,iBAAKN,GAAGO;AAFD;AANH,KAHP;;AAeLE,UAfK,oBAeI;AACL,aAAKC,MAAL;;AAEA,aAAKC,OAAL,GAAe,KAAKC,QAAL,CAAc,SAAd,EAAyBC,YAAzB,CAAsC,kBAAtC,CAAf;AACA,aAAKF,OAAL,CAAaG,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;AACA,aAAKC,OAAL,GAAe,KAAKJ,QAAL,CAAc,SAAd,EAAyBC,YAAzB,CAAsC,kBAAtC,CAAf;AACA,aAAKG,OAAL,CAAaF,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;AACA,aAAKE,OAAL,GAAe,KAAKL,QAAL,CAAc,SAAd,EAAyBC,YAAzB,CAAsC,kBAAtC,CAAf;AACA,aAAKI,OAAL,CAAaH,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;AACA,aAAKH,QAAL,CAAc,MAAd,EAAsBM,EAAtB,CAAyB,OAAzB,EAAkC,KAAKC,IAAvC,EAA6C,IAA7C;AACH,KAzBI;;;AA2BLC,aAAS,iBAASC,IAAT,EAAe;AACpB,YAAIA,KAAKC,MAAL,GAAc,CAAlB,EAAqB;AACjB,iBAAKX,OAAL,CAAaS,OAAb,CAAqBC,KAAK,CAAL,CAArB;AACA,iBAAKV,OAAL,CAAaG,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;AACA,gBAAIM,KAAKC,MAAL,GAAc,CAAlB,EAAqB;AACjB,qBAAKN,OAAL,CAAaI,OAAb,CAAqBC,KAAK,CAAL,CAArB;AACA,qBAAKL,OAAL,CAAaF,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;AACH;AACD,gBAAIM,KAAKC,MAAL,GAAc,CAAlB,EAAqB;AACjB,qBAAKL,OAAL,CAAaG,OAAb,CAAqBC,KAAK,CAAL,CAArB;AACA,qBAAKJ,OAAL,CAAaH,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;AACH;AACJ;;AAED,YAAIM,KAAK,CAAL,MAAYtB,IAAIwB,QAAJ,CAAaC,EAA7B,EAAiC;AAC7BxB,eAAGyB,WAAH,CAAeC,IAAf,CAAoB,KAAKtB,QAAzB,EAAmC,KAAnC,EAA0C,CAA1C;AACA;AACAuB,iBAAKC,WAAL,CAAiBC,WAAjB;AACH,SAJD,MAIO;AACH7B,eAAGyB,WAAH,CAAeC,IAAf,CAAoB,KAAKlB,SAAzB,EAAoC,KAApC,EAA2C,CAA3C;AACH;AACJ,KAhDI;;AAmDLW,UAAM,gBAAW;AACbrB,YAAIgC,MAAJ,CAAWC,SAAX,CAAqB,EAArB;AACA,YAAIC,YAAYC,OAAOC,MAAP,CAAc,aAAd,CAAhB;AACA,YAAIF,SAAJ,EAAe;AACXC,mBAAOE,OAAP,CAAe,aAAf;AACAH,sBAAUI,OAAV;AACH;AACDH,eAAOE,OAAP,CAAe,KAAKrB,IAAL,CAAUuB,IAAzB;AACA,aAAKvB,IAAL,CAAUsB,OAAV;;AAEAT,aAAKC,WAAL,CAAiBU,SAAjB;AACH;AA9DI,CAAT","file":"uiResult.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\common\\script","sourcesContent":["var uiPanel = require(\"uiPanel\");\r\nvar mvs = require(\"Matchvs\");\r\nvar GLB = require(\"Glb\");\r\ncc.Class({\r\n    extends: uiPanel,\r\n\r\n    properties: {\r\n        winAudio: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n\r\n        loseAudio: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n    },\r\n\r\n    onLoad() {\r\n        this._super();\r\n\r\n        this.player1 = this.nodeDict[\"player1\"].getComponent(\"resultPlayerIcon\");\r\n        this.player1.node.active = false;\r\n        this.player2 = this.nodeDict[\"player2\"].getComponent(\"resultPlayerIcon\");\r\n        this.player2.node.active = false;\r\n        this.player3 = this.nodeDict[\"player3\"].getComponent(\"resultPlayerIcon\");\r\n        this.player3.node.active = false;\r\n        this.nodeDict[\"quit\"].on(\"click\", this.quit, this);\r\n    },\r\n\r\n    setData: function(data) {\r\n        if (data.length > 0) {\r\n            this.player1.setData(data[0]);\r\n            this.player1.node.active = true;\r\n            if (data.length > 1) {\r\n                this.player2.setData(data[1]);\r\n                this.player2.node.active = true;\r\n            }\r\n            if (data.length > 2) {\r\n                this.player3.setData(data[2]);\r\n                this.player3.node.active = true;\r\n            }\r\n        }\r\n\r\n        if (data[0] === GLB.userInfo.id) {\r\n            cc.audioEngine.play(this.winAudio, false, 1);\r\n            // 发送胜局记录--\r\n            Game.GameManager.loginServer();\r\n        } else {\r\n            cc.audioEngine.play(this.loseAudio, false, 1);\r\n        }\r\n    },\r\n\r\n\r\n    quit: function() {\r\n        mvs.engine.leaveRoom(\"\");\r\n        var gamePanel = uiFunc.findUI(\"uiGamePanel\");\r\n        if (gamePanel) {\r\n            uiFunc.closeUI(\"uiGamePanel\");\r\n            gamePanel.destroy();\r\n        }\r\n        uiFunc.closeUI(this.node.name);\r\n        this.node.destroy();\r\n\r\n        Game.GameManager.lobbyShow();\r\n    }\r\n});\r\n"]}