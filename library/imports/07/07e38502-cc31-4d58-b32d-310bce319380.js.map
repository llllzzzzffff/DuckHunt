{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\game\\script/assets\\game\\script\\bulletManager.js"],"names":["mvs","require","GLB","cc","Class","extends","Component","properties","smallBulletPrefab","default","type","Prefab","bigBulletPrefab","onLoad","Game","BulletManager","smallBulletCnt","smallBulletPool","NodePool","bigBulletPool","loadBullet","spawnSmallBullet","host","pos","temp","get","instantiate","bulletComponent","getComponent","initData","spawnBigBullet","recycleBullet","bullet","bType","BulletType","Normal","put","node"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;AACA,IAAIC,MAAMD,QAAQ,KAAR,CAAV;AACAE,GAAGC,KAAH,CAAS;;AAELC,aAASF,GAAGG,SAFP;AAGLC,gBAAY;AACRC,2BAAmB;AACfC,qBAAS,IADM;AAEfC,kBAAMP,GAAGQ;AAFM,SADX;AAKRC,yBAAiB;AACbH,qBAAS,IADI;AAEbC,kBAAMP,GAAGQ;AAFI;AALT,KAHP;;AAeLE,UAfK,oBAeI;AACLC,aAAKC,aAAL,GAAqB,IAArB;AACA,aAAKC,cAAL,GAAsB,EAAtB;AACA;AACA,aAAKC,eAAL,GAAuB,IAAId,GAAGe,QAAP,EAAvB;AACA,aAAKC,aAAL,GAAqB,IAAIhB,GAAGe,QAAP,EAArB;AAEH,KAtBI;;;AAwBLE,gBAAY,sBAAW;AACnB,aAAKJ,cAAL,GAAsB,EAAtB;AACH,KA1BI;;AA4BLK,sBAAkB,0BAASC,IAAT,EAAeC,GAAf,EAAoB;AAClC,YAAIC,OAAO,KAAKP,eAAL,CAAqBQ,GAArB,EAAX;AACA,YAAI,CAACD,IAAL,EAAW;AACPA,mBAAOrB,GAAGuB,WAAH,CAAe,KAAKlB,iBAApB,CAAP;AACH;AACD,YAAImB,kBAAkBH,KAAKI,YAAL,CAAkB,QAAlB,CAAtB;AACA,YAAID,eAAJ,EAAqB;AACjBA,4BAAgBE,QAAhB,CAAyBP,IAAzB,EAA+BC,GAA/B;AACH;AACJ,KArCI;;AAuCLO,oBAAgB,wBAASR,IAAT,EAAeC,GAAf,EAAoB;AAChC,YAAIC,OAAO,KAAKL,aAAL,CAAmBM,GAAnB,EAAX;AACA,YAAI,CAACD,IAAL,EAAW;AACPA,mBAAOrB,GAAGuB,WAAH,CAAe,KAAKd,eAApB,CAAP;AACH;AACD,YAAIe,kBAAkBH,KAAKI,YAAL,CAAkB,QAAlB,CAAtB;AACA,YAAID,eAAJ,EAAqB;AACjBA,4BAAgBE,QAAhB,CAAyBP,IAAzB,EAA+BC,GAA/B;AACH;AACJ,KAhDI;;AAkDLQ,mBAAe,uBAASC,MAAT,EAAiB;AAC5B,YAAIA,OAAOC,KAAP,KAAiBC,WAAWC,MAAhC,EAAwC;AACpC,iBAAKlB,eAAL,CAAqBmB,GAArB,CAAyBJ,OAAOK,IAAhC;AACH,SAFD,MAEO;AACH,iBAAKlB,aAAL,CAAmBiB,GAAnB,CAAuBJ,OAAOK,IAA9B;AACH;AACJ;AAxDI,CAAT","file":"bulletManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\game\\script","sourcesContent":["var mvs = require(\"Matchvs\");\r\nvar GLB = require(\"Glb\");\r\ncc.Class({\r\n\r\n    extends: cc.Component,\r\n    properties: {\r\n        smallBulletPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        bigBulletPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        }\r\n    },\r\n\r\n\r\n    onLoad() {\r\n        Game.BulletManager = this;\r\n        this.smallBulletCnt = 10;\r\n        // 子弹池--\r\n        this.smallBulletPool = new cc.NodePool();\r\n        this.bigBulletPool = new cc.NodePool();\r\n\r\n    },\r\n\r\n    loadBullet: function() {\r\n        this.smallBulletCnt = 10;\r\n    },\r\n\r\n    spawnSmallBullet: function(host, pos) {\r\n        var temp = this.smallBulletPool.get()\r\n        if (!temp) {\r\n            temp = cc.instantiate(this.smallBulletPrefab);\r\n        }\r\n        var bulletComponent = temp.getComponent(\"bullet\");\r\n        if (bulletComponent) {\r\n            bulletComponent.initData(host, pos);\r\n        }\r\n    },\r\n\r\n    spawnBigBullet: function(host, pos) {\r\n        var temp = this.bigBulletPool.get()\r\n        if (!temp) {\r\n            temp = cc.instantiate(this.bigBulletPrefab);\r\n        }\r\n        var bulletComponent = temp.getComponent(\"bullet\");\r\n        if (bulletComponent) {\r\n            bulletComponent.initData(host, pos);\r\n        }\r\n    },\r\n\r\n    recycleBullet: function(bullet) {\r\n        if (bullet.bType === BulletType.Normal) {\r\n            this.smallBulletPool.put(bullet.node);\r\n        } else {\r\n            this.bigBulletPool.put(bullet.node);\r\n        }\r\n    },\r\n});\r\n"]}